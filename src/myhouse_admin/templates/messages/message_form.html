{% load static widget_tweaks %}

<section class="content">
    <form action="" method="POST" class="was-validated">
        {% csrf_token %}
        <div class="card mx-2">
            <div class="card-body">
                {% for error_name, error in form.errors.items %}
                <div class="alert alert-danger">
                    <button type="button" class="close" data-dismiss="alert">×</button>
                    {{error_name}}:{{ error|striptags }}
                </div>
                {% endfor %}
                <div class="row">
                    <div class="col-12">
                        <div class="form-group g-3">
                            {% render_field form.subject class='form-control is-invalid' placeholder="Тема сообщения:" %}
                        </div>
                    </div>
                    <div class="col-12">
                        <div class="form-group g-3">
                            {% render_field form.body class='form-control is-invalid' %}
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <h4>Кому отправить:</h4>
                        <div class="form-group g-3">
                            {% render_field form.for_debtors %}
                            <label for="{{form.for_debtors.auto_id}}">Владельцам с задолженностями</label>
                        </div>
                        <div class="form-group g-3">
                            <label for="{{form.house.auto_id}}" class="form-label">ЖК</label>
                            {% render_field form.house class='form-control is-invalid' data-house-sections-url=load_house_sections_url data-empty-flats=load_empty_flats_url %}
                        </div>
                        <div class="form-group g-3">
                            <label for="{{form.section.auto_id}}" class="form-label">Секция</label>
                            {% render_field form.section class='form-control is-invalid' data-section-floors-url=load_section_floors_url %}
                        </div>
                        <div class="form-group g-3">
                            <label for="{{form.floor.auto_id}}" class="form-label">Этаж</label>
                            {% render_field form.floor class='form-control is-invalid' data-floor-flats-url=load_floor_flats_url %}
                        </div>
                        <div class="form-group g-3">
                            <label for="{{form.flat.auto_id}}" class="form-label">Квартира</label>
                            {% render_field form.flat class='form-control is-invalid'%}
                        </div>
                    </div>
                </div>
                <div class="row d-flex justify-content-end mr-2">
                    <button class="btn btn-success mr-1" type="submit">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-envelope" viewBox="0 0 16 16">
                            <path d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4zm2-1a1 1 0 0 0-1 1v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1H2zm13 2.383-4.758 2.855L15 11.114v-5.73zm-.034 6.878L9.271 8.82 8 9.583 6.728 8.82l-5.694 3.44A1 1 0 0 0 2 13h12a1 1 0 0 0 .966-.739zM1 11.114l4.758-2.876L1 5.383v5.73z"/>
                        </svg>&nbsp;Отправить</button>
                </div>
            </div>
        </div>
    </form>
</section>